language: go
go:
    - "1.10"

before_install:
    - mkdir tmp
    - git clone https://github.com/macarrie/vidocq tmp/vidocq
    - cd tmp/vidocq && cargo build --release
    - cp tmp/vidocq/target/release/vidocq /usr/bin/vidocq

install:
    - go get -u golang.org/x/vgo

before_script:
    - vgo vet ./...

script:
    - make test

after_success:
  - bash <(curl -s https://codecov.io/bash)
